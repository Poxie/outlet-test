version: '3.8'
services:
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
      args:
        NEXT_PUBLIC_API_ENDPOINT: ${NEXT_PUBLIC_API_ENDPOINT}
        GOOGLE_MAPS_BASE_URL: ${GOOGLE_MAPS_BASE_URL}
        GOOGLE_MAPS_API_BASE_URL: ${GOOGLE_MAPS_API_BASE_URL}
        GOOGLE_MAPS_API_KEY: ${GOOGLE_MAPS_API_KEY}
    image: "europe-north1-docker.pkg.dev/${PROJECT_ID}/app/outlet-frontend:latest"
  
  admin:
    build:
      context: ./admin
      dockerfile: Dockerfile
      args:
        NEXT_PUBLIC_API_ENDPOINT: ${NEXT_PUBLIC_API_ENDPOINT}
    image: "europe-north1-docker.pkg.dev/${PROJECT_ID}/app/outlet-admin:latest"

  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile
      args:
        PORT: ${PORT}
        ADMIN_URL: ${ADMIN_URL}
        CLIENT_URL: ${CLIENT_URL}
        BCRYPT_SALT_ROUNDS: ${BCRYPT_SALT_ROUNDS}
        REDIS_URL: ${REDIS_URL}
        CLOUDINARY_CLOUD_NAME: ${CLOUDINARY_CLOUD_NAME}
        CLOUDINARY_API_KEY: ${CLOUDINARY_API_KEY}
        CLOUDINARY_SECRET: ${CLOUDINARY_SECRET}
        JWT_SECRET: ${JWT_SECRET}
        PROPERTY_ID: ${PROPERTY_ID}
        DATABASE_URL: ${DATABASE_URL}
    image: "europe-north1-docker.pkg.dev/${PROJECT_ID}/app/outlet-api:latest"